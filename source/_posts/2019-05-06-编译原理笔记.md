---
title: 编译原理笔记
date: 2019-05-06 12:19:55
categories: 编译原理
tags: [编译原理,笔记]
description: 编译原理课程笔记
mathjax: true
---

# 编译原理

## 绪论

### 什么是编译

将高级语言翻译成汇编语言或机器语言的过程。

### 编译系统的结构

字符流 词法分析器 语法分析器 语义分析器 中间代码生成器 机器无关代码优化器 目标代码生成器 机器相关代码优化器

### 词法分析概述

任务：扫描字符，确定单词类型，转换为统一的机内表示。

### 语法分析概述

任务：从词法分析器输出的token序列中识别出各类短语，并构造语法分析树。
语法分析树描述了句子的语法结构。

### 语义分析概述

任务：

- 收集标志符的属性信息
  - 属种
  - 类型
  - 存储位置、长度
  - 值
  - 作用域
  - 参数和返回值信息
- 语义检查
  - 变量或过程未经声明就使用
  - 变量或过程名重复声明
  - 运算分量类型不匹配
  - 操作数之类类型不匹配

### 中间代码生成

中间表示形式：

- 三地址码（四元式表示）
- 语法树

### 目标代码生成

目标代码生成以中间代码作为输入，生成目标代码。

任务：合理分配寄存器

### 代码优化

等价程序变换，使运行更快，占用空间更少。

## 语言及其文法

### 字母表

字母表$\sum$是一个有穷符号集合

### 字母表上的运算

- 乘积：两个集合中的元素相拼接
- n次幂：长度为n的符号串构成的集合
- 正闭包
- 克林闭包：正闭包基础上加一个空串

### 串

- 串：字母表上的符号的有穷序列
- 长度：串中符号的个数
- 空串：长度为0的串

### 串的运算

- 连接：y串附加到x串后
- 幂

### 文法

G=($V_T$,$V_N$,S,P)

- $V_T$是有限的终极符集合（文法定义的语言的基本符号）
- $V_N$是有限的非终极符集合（表示语法成分的符号，也称语法变量）
- S是开始符，$S \in V_N$（表示该文法中最大的语法成分）
- P是产生式（规则）的集合（将终结符和非终结符结合成串的方法，左部至少包含一个非终极符）

#### 约定

- 文法简写可只写产生式
- 终结符、非终结符、文法符号、终结符号串、文法符号串

### 推导和规约

推导：$\Rightarrow$，用产生式的右部替换产生式的左部

- 一步或多步推导：$\Rightarrow^+$
- 零步或多步推导：$\Rightarrow^*$

规约：用产生式的左部替换产生式的右部

### 句型

若$S\Rightarrow^*\alpha，\alpha \in (V_T \cup V_N)^*$，$\alpha$是文法$G$的一个句型。

句型中可包含终结符、非终结符、空串。

### 句子

若$S\Rightarrow^*\beta,\beta \in V_T^*$，$\beta$是文法$G$的一个句子。

句子是特殊的句型，它不包含非终结符。

### 语言

语言为所有句子的集合

$L(G)=\left\{ \beta | S \Rightarrow^+\beta ,\beta \in V_T^* \right\}$

### 文法的种类

#### 0型文法：无限制文法/短语结构文法

要求左部至少包含一个非终结符

#### 1型文法：上下文有关文法(CSG)

在0型文法基础上，进一步要求左部符号个数不多于右部符号个数

CSG有段不包含空产生式

#### 2型文法：上下文无关文法(CFG)

产生式左部为非终结符

#### 3型文法：正则文法(RG)

右线性文法：$A\rightarrow wB$或$A\rightarrow w$

左线性文法：$A\rightarrow Bw$或$A\rightarrow w$

#### 四种文法

- 逐级限制
- 逐级包含

### 短语（相对于句型而言；由非终极符经过至少一次推导产生的）

分析树中每棵子树的边缘

设S是文法的开始符，有$S\Rightarrow^*\alpha_1A\alpha_2$，如果有$A\Rightarrow^+\beta$则称$\beta$是句型$\alpha_1\beta\alpha_2$的一个短语。

### 简单短语（非终极符本身，或由非终极符经过至少一次推导产生的）

子树只有父子两代结点，这棵字数的边缘称简单短语

设S是文法的开始符，有$S\Rightarrow^*\alpha_1A\alpha_2$，如果有$A\Rightarrow\beta$则称$\beta$是句型$\alpha_1\beta\alpha_2$的一个简单短语。

### 句柄

句型中的最左简单短语称为句柄。

### 二义性文法

若一个文法能为一个句子生成多棵分析树，则这个文法是二义性的。
不能判断一个文法是否是二义性的，单可给出一组规则，使其构造出的文法是不具有二义性的。

## 词法分析

### 正则表达式

$r|s$
$rs$
$r^*$
$r^+$

正则定义即用变量名代表一个正则表达式。

### 有穷自动机(Finite Automata,FA)

具有有穷个状态，根据当前的状态和输入确定之后到达的状态。

串x，对于自动机存在对于串x从初始状态到终止状态的转换序列，则串被自动机接收。

- 最长子串匹配原则：在到达某个终态后，只要输入带上还有符号，则FA继续前进，以便寻求最可能长的匹配。

